<!DOCTYPE html><html lang="ko-Ko" data-mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6746159211291883" crossorigin="anonymous"></script><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Neo4j Proof of Concept" /><meta name="author" content="오소리사냥꾼" /><meta property="og:locale" content="ko_Ko" /><meta name="description" content="1. DB-Engines Ranking of Graph DBMS 22년 1월 기준. ranking 1위. enterprise 큰 돈 받고, 파는." /><meta property="og:description" content="1. DB-Engines Ranking of Graph DBMS 22년 1월 기준. ranking 1위. enterprise 큰 돈 받고, 파는." /><link rel="canonical" href="https://osoriandomori.github.io/posts/Neo4j-poc/" /><meta property="og:url" content="https://osoriandomori.github.io/posts/Neo4j-poc/" /><meta property="og:site_name" content="Osori Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-02-01T09:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Neo4j Proof of Concept" /><meta name="google-site-verification" content="3mGiMhW1vgijjQomvvMpPHU6NWze9aLLugKDHAyFIls" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"오소리사냥꾼","url":"https://github.com/OsoriAndOmori"},"dateModified":"2022-07-22T03:23:21+00:00","datePublished":"2022-02-01T09:00:00+00:00","description":"1. DB-Engines Ranking of Graph DBMS 22년 1월 기준. ranking 1위. enterprise 큰 돈 받고, 파는.","headline":"Neo4j Proof of Concept","mainEntityOfPage":{"@type":"WebPage","@id":"https://osoriandomori.github.io/posts/Neo4j-poc/"},"url":"https://osoriandomori.github.io/posts/Neo4j-poc/"}</script><title>Neo4j Proof of Concept | Osori Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Osori Blog"><meta name="application-name" content="Osori Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/turtle2.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Osori Blog</a></div><div class="site-subtitle font-italic">오소리 오모리들의 <br>공유용 학습 블로그 & 개발 수첩</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/OsoriAndOmori" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['skywhite15','korea.ac.kr'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Neo4j Proof of Concept</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Neo4j Proof of Concept</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1643706000" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Feb 1, 2022 </em> </span> <span> Updated <em class="" data-ts="1658460201" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 22, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/OsoriAndOmori">오소리사냥꾼</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2185 words"> <em>12 min</em> read</span></div></div></div><div class="post-content"><h2 id="1-db-engines-ranking-of-graph-dbms"><span class="mr-2">1. DB-Engines Ranking of Graph DBMS</span><a href="#1-db-engines-ranking-of-graph-dbms" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>22년 1월 기준. ranking 1위. enterprise 큰 돈 받고, 파는.</ul><h2 id="2-특징"><span class="mr-2">2. 특징</span><a href="#2-특징" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>자바 기반의 그래프 DB로서, 임베딩 방식과 REST 방식을 지원한다.<li>jvm 상에서 돌기 때문에, 당연히 jvm 옵션들도 지원함. 주로 만지는 설정은 Heap memory, GC<li>트랜잭션을 지원하며, JTA(Java Transaction APIs)를 지원한다.<li>이중화를 통한 고가용성을 지원한다. ( Zookeeper 사용)=<li>백업/복구를 지원한다.<li>gui 툴이 강력하다. Desktop App 도 있으며 브라우저를 Database IDE 로 사용 가능하다<li>몽고같은 알아서 샤딩 불가능. 모든 데이터가 단일 노드에 쓰인다. 읽기 전용 replica 를 따로 두어 성능을 보장한다.<li>장비 scale out 개념이 없음. 용량 부족시 scale up 으로만 해결 가능<li>g의 이유로 정말 큰 빅데이터를 무한히 쌓으며 처리하는 플랫폼으로는 적합하지 않음. (제한이 필요함)<li>3.x대 버전은 jdk 1.8 사용, 4.x대 버전은 jdk 11 사용</ul><h2 id="3-ecosystem"><span class="mr-2">3. ecosystem</span><a href="#3-ecosystem" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>spring-boot : spring-data-neo4j : 넣고 빼고 jpa 느낌</ul><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre>public interface PersonRepository extends Neo4jRepository&lt;Person, Long&gt; {

 Person findByName(String name);
 List&lt;Person&gt; findByTeammatesName(String name);
}

@Node
public class Person {

 @Id @GeneratedValue private Long id;
 private String name;

 private Person() {
  // Empty constructor required as of Neo4j API 2.0.5
 };

 @Relationship(type = "TEAMMATE")
 public Set&lt;Person&gt; teammates;

 public void worksWith(Person person) {
  if (teammates == null) {
   teammates = new HashSet&lt;&gt;();
  }
  teammates.add(person);
 }
}
</pre></table></code></div></div><ul><li>node : neo4j-driver</ul><h2 id="4-설정-핵심-위주"><span class="mr-2">4. 설정. 핵심 위주</span><a href="#4-설정-핵심-위주" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>$NEO4J_HOME/conf/neo4j.conf 로 하나의 파일에서 모든 설정을 담당한다.neo4j.conf<li>매우 직관적이고 주석 포함해 800줄밖에 되지 않으니 하나하나 읽어봐도 오래걸리지 않는다. 굳이 문서를 참고할 필요는 없다.<li>jvm heap memory</ul><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre># heap initial, max 는 일반 was 설정과 같이 동일하게 설정하는 것이 좋음. 동적 변경은 OOM 발생 가능성 및 GC 가능성 증가
dbms.memory.heap.initial_size=4g
dbms.memory.heap.max_size=4g
</pre></table></code></div></div><ul><li>cache</ul><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre># graph data, index data를 메모리에 로드하여 disk io를 줄이는 캐싱이다.
# 일반적으로 disk io를 줄이기 위해, db 실행시 warm up을 통해 많은 양의 데이터를 memory에 상주시킨다.
# jvm heap 메모리와 관련이 없고 Native Memory 영역, OS로부터 직접 할당받는 영역으로 알아서 사이즈는 동적으로 변한다. GC 가 영향을 미칠 수 없는 영역이다.
dbms.memory.pagecache.size=40g

# n 개의 Execution plans 를 캐시.
# Execution plans 은 Cypher Query 를 구성하는 operator 의 트리구조를 의미함.
# 결과를 캐싱하는건 아니고 plan tree 를 캐싱해서 실행을 조금더 빠르게 한다는 의미로 생각하면 됨.
dbms.query_cache_size=1000
</pre></table></code></div></div><ul><li>neo4j-admin memrec 커멘드를 이용하여 메모리 설정 추천을 받을 수 있다<li>Network connector configuration 관련</ul><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre># 따로 설정을 하지 않는다면, neo4j 는 로컬에서 접속만 가능한 상태다.
# 아래 설정을 변경해 줌으로서 외부에서 remote 로 붙을 수 있게 됨.
# 받은 서버에 neo4j 설치 이후 아래 설정을 변경해서,
dbms.default_listen_address=0.0.0.0

# ip 나 dns를 셋팅해서 사용자 접근 받을 수 있게한다고 되어있는데. 사실 좀 애매함.
# 여러대 설치하느라 ip 자동 입력을 위해 shell 스크립트 사용
# neo4j 구동시 shell script 사용하고 싶으면 $NEO4J_HOME/bin/neo4j start --expand-commands 명령어 붙여서 실행해야함
dbms.default_advertised_address=$(hostname -I)

## 접근하기위해 사용할 수 있는 protocol 설정. Database IDE 에선 bolt 로 붙는다.
dbms.connector.bolt.enabled=true
dbms.connector.http.enabled=true
dbms.connector.https.enabled=false
</pre></table></code></div></div><h2 id="5-실-서비스에서-활용하기-위한-내용"><span class="mr-2">5. 실 서비스에서 활용하기 위한 내용</span><a href="#5-실-서비스에서-활용하기-위한-내용" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>cluster: enterprise 버전에만 존재함<ul><li>neo4j 는 샤딩을 지원하지 않음. graph database 와 샤딩은 trade off 관계 by Neo4j 개발자.<li>구현을 할 수 있지만 속도 문제 등 다양한 문제를 고려할 떄, 어렵다 판단해서 neo4j 에서는 활용하지 않음.<li>모든 데이터가 단일 노드에 들어있기 때문에, read / write 성능, 장애 발생시 failover 에 대한 보장이 필요했다.<li>core 숫자 = 2N + 1 개를 유지하면 N번의 failover 가 가능함. raft 알고리즘으로 core 중 리더를 선출하고 데이터를 받으며 서로 복제하며 sync를 맞춘다.<li>3개 중 어디로 데이터 넣어도 write 가능<li>클러스터 구성 절차<ol><li>core 를 먼저 배포<li>read-replica 는 core 가 어떤 서버인지 설정 뒤 붙이면 자동으로 cluster에 투입된다.<li>상황에 따라 read-replica 증설할 것.</ol></ul></ul><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre># Database mode
# Allowed values:
# CORE - Core member of the cluster, part of the consensus quorum.
# READ_REPLICA - Read replica in the cluster, an eventually-consistent read-only instance of the database.
# To operate this Neo4j instance in Causal Clustering mode as a core member, uncomment this line:
dbms.mode=CORE

# Expected number of Core servers in the cluster at formation
causal_clustering.minimum_core_cluster_size_at_formation=3

# Minimum expected number of Core servers in the cluster at runtime.
causal_clustering.minimum_core_cluster_size_at_runtime=3

# A comma-separated list of the address and port for which to reach all other members of the cluster. It must be in the
# host:port format. For each machine in the cluster, the address will usually be the public ip address of that machine.
# The port will be the value used in the setting "causal_clustering.discovery_listen_address".
# 최초로 통신할 코어들 ip를 투입한다. 운영중 추가하는 core instance 는 운영중 추가해도 됨.
causal_clustering.initial_discovery_members=10.106.163.198:5000,10.106.156.73:5000,10.106.221.226:5002
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre># READ_REPLICA - Read replica in the cluster, an eventually-consistent read-only instance of the database.
dbms.mode=READ_REPLICA
causal_clustering.minimum_core_cluster_size_at_formation=3
causal_clustering.minimum_core_cluster_size_at_runtime=3

# 여기엔 core instance ip 만 작성해야함
causal_clustering.initial_discovery_members=10.106.163.198:5000,10.106.156.73:5000,10.106.221.226:5002
</pre></table></code></div></div><ul><li>fabric<ul><li>여러 neo4j cluster 로 routing 해주는 개념.<li>neo4j 에서는 sharding 이라고 소개를 하긴 하지만, 사실은 개발자에의해 논리적으로 나눠진 다른 datasource 간 Routing 이라고 보는것이 맞고, elastic 같은 것 처럼 cluster node 추가, shard rebalancing 같은 기능은 없어서 진정한 의미의 데이터 sharding 이라고 하긴 어렵다.<li>서로 관계 짓지 않고, 별도의 데이터로 저장하여 UNION 하는 방식을 지원하나, 개발복잡도가 높아질 것으로 사료됨. 사용성이 떨어지는 것으로 보임.<li>mysql 은 다른 database 끼리 join 이나 쿼리를 동시에 처리할 순 없지만, 아래와 같은 쿼리로 함께 데이터 가져오는 것은 가능하다</ul></ul><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre># neo4j.conf Fabric config
fabric.database.name=fabric

fabric.graph.0.uri=neo4j://localhost:7687
fabric.graph.0.database=neo4j
fabric.graph.0.name=neo4j

fabric.graph.1.uri=neo4j://localhost:7687
fabric.graph.1.database=payments
fabric.graph.1.name=payments
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre><td class="rouge-code"><pre># u:User 2명, a:Address, s:SSN 만들고 각각 [HAS_ADDRESS], [HAS_SSN] 로 연결
USE fabric.neo4j;
CREATE (u:User{uid:1234,name:"Andy"});
CREATE (u:User{uid:7890});
CREATE (a:Address{street:"2985 Finwood Dr",city:"Freehold",state:"NJ"});
CREATE (s:SSN{num:"321-7654-098"});

MATCH (u:User),(a:Address)
WHERE u.uid=1234 AND a.street="2985 Finwood Dr"
CREATE (u)-[:HAS_ADDRESS]-&gt;(a);

MATCH (u:User),(s:SSN)
WHERE u.uid=1234 AND s.num="321-7654-098"
CREATE (u)-[:HAS_SSN]-&gt;(s);

# fabric payment db 에 노드 3개 만들고, transaction 이어붙임
USE fabric.payment;
CREATE (u:User{uid:1234});
CREATE (t:Transaction{tid:"t001",amt:10,vendor:"amc"});
CREATE (t:Transaction{tid:"t002",amt:5,currency:"USD",vendor:"strbcks"});

MATCH (u:User),(t:Transaction)
WHERE u.uid=1234
CREATE (u)-[:HAS_TRANSACTION]-&gt;(t);

# fabric 활용한 query 샘플
CALL{
	USE fabric.neo4j
	MATCH (u:User)-[:HAS_SSN]-&gt;(s:SSN)
	RETURN u.uid as userId, u.name as uname, s.num as ssn
}
CALL {
	USE fabric.payments
    WITH userId
    MATCH (u:User)-[:HAS_TRANSACTION]-&gt;(t:Transaction)
    WHERE u.uid = userId
    RETURN t.tid as transactionID, t.amt as Amount,t.vendor as Vendor
}
RETURN uname,ssn,transactionID,Amount,Vendor
</pre></table></code></div></div><ul><li>monitoring</ul><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre># prometeous 로 neo4j merics export 가 가능함 관련 설정
# prometeous 알아서 설치 후, 구동 시킨 뒤
metrics.prometheus.enabled=true
metrics.prometheus.endpoint=localhost:2004
</pre></table></code></div></div><ul><li>장비 가용량 계산<ul><li>노드 프로퍼티는 5개, 관계는 2개씩,<li>노드하나는 15B, 관계하나는 34B, 프로퍼티하나는 41B 라 계산하면 대충 나옴.<li>ex). 4억 개 노드, 2억개의 관계 = 150g</ul><li>유지보수 입장에서, 버전업<ul><li>운영중 db 버전업하는 사례가 많지는 않지만 치명적인 오류가 있을수도 있으니….<li>체크리스트 다 체크하고<li>클러스터 전부 내리고 업데이트하고 올리기.<li>cluster 를 사용할 경우 순단없이 하나씩 업데이트하면 되나, 개발자가 직접 메뉴얼 보며 진행해야함.</ul></ul><h2 id="6-비용"><span class="mr-2">6. 비용</span><a href="#6-비용" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>싯가 : 구글링해서 본 가격은 연 7000만원 정도이나, 서비스 사이즈 따라에 다르기 떄문에 정확히는 문의해보아야함. 연 1억이라 생각하고 있으면 될 듯.<li>ongdb : neo4j enterprise 를 오픈소스화 하여 무료로 풀린 graph db.</ul><h2 id="7-그-외-읽어볼-내용"><span class="mr-2">7. 그 외 읽어볼 내용</span><a href="#7-그-외-읽어볼-내용" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>docker &amp; kubernetes</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/blogging/'>Blogging</a>, <a href='/categories/database/'>Database</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/database/" class="post-tag no-text-decoration" >database</a> <a href="/tags/neo4j/" class="post-tag no-text-decoration" >neo4j</a> <a href="/tags/graphdb/" class="post-tag no-text-decoration" >graphdb</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Neo4j+Proof+of+Concept+-+Osori+Blog&url=https%3A%2F%2Fosoriandomori.github.io%2Fposts%2FNeo4j-poc%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Neo4j+Proof+of+Concept+-+Osori+Blog&u=https%3A%2F%2Fosoriandomori.github.io%2Fposts%2FNeo4j-poc%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fosoriandomori.github.io%2Fposts%2FNeo4j-poc%2F&text=Neo4j+Proof+of+Concept+-+Osori+Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/opensearch-%EA%B0%80%EC%9D%B4%EB%93%9C/">Opensearch 가이드 용 문서</a><li><a href="/posts/%EB%82%B4-%EB%A7%98%EB%8C%80%EB%A1%9C-%ED%8C%80-%EC%9E%85%EC%82%AC-%EA%B5%90%EC%9C%A1%EA%B3%BC%EC%A0%95/">내 맘대로 팀 입사 교육과정</a><li><a href="/posts/slack-%EB%B4%87-%EB%A7%8C%EB%93%A4%EB%A9%B0-%EA%B9%A8%EB%8B%AC%EC%9D%80-%ED%9B%84%EA%B8%B0/">slack 봇 만들며 깨달은 후기</a><li><a href="/posts/Kafka-%EB%AA%B0%EB%9E%90%EB%8D%98%EA%B1%B0/">Kafka 맨날 까먹는거만 정리</a><li><a href="/posts/%EC%9D%B8%ED%94%84%EB%9F%B0-%EC%8A%A4%ED%94%84%EB%A7%81-%EB%B6%80%ED%8A%B8-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC/">Spring boot 핵심 원리</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/database/">database</a> <a class="post-tag" href="/tags/spring-batch/">spring-batch</a> <a class="post-tag" href="/tags/nodejs/">nodejs</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/mind-control/">mind-control</a> <a class="post-tag" href="/tags/nextjs/">nextjs</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/sharding/">sharding</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/ElasticSearch-1%EB%85%84%EA%B0%84-%EC%9A%B4%EC%98%81%ED%95%98%EB%A9%B0/"><div class="card-body"> <em class="small" data-ts="1591693200" data-df="ll" > Jun 9, 2020 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>ElasticSearch 1년간 운영하며</h3><div class="text-muted small"><p> 검색을 하지않는 이상, 결국 es 는 로깅 + 조회 용일뿐 데이터 가공한걸 넣고 쓰는용으로는 맞지않다. 가공은 다른곳에 저장하고, 순정 log로 보고 편하게 쌓고 보고싶을 떄 유용하다. 별 생각없으면 적용하면 좋은 부분 index 는 가능하면 시간, 날짜 기반으로 설정할 수 있도록 하고, life cycle management 기능을...</p></div></div></a></div><div class="card"> <a href="/posts/dbcp-pool-setting/"><div class="card-body"> <em class="small" data-ts="1643187600" data-df="ll" > Jan 26, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>dbcp pool 설정에 관해서</h3><div class="text-muted small"><p> 메인DB mysql connection pool mysql 뿐만아니라 모든 db는 db 쪽에서 client connection pool 설정을 갖는다. 사용자가 아무리 많은 connection 맺을라고해도, 결국엔 client connection pool 이상을 넘지 못한다. 넘는 경우 연결을 만들 수 없다며 에러 받고 db access...</p></div></div></a></div><div class="card"> <a href="/posts/opensearch-%EA%B0%80%EC%9D%B4%EB%93%9C/"><div class="card-body"> <em class="small" data-ts="1761793200" data-df="ll" > Oct 30, 2025 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Opensearch 가이드 용 문서</h3><div class="text-muted small"><p> 분산형 검색 및 분석 엔진 Elasticsearch 오픈소스 기반으로 Amazon이 유지 중인 Community-Driven Fork 분산 인덱싱 + 검색 엔진 → 대용량 로그, 메트릭, 문서 데이터를 수평 확장으로 처리 REST API 기반으로 쉽게 접근 (/_search, /_cat/indices 등)...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/dbcp-pool-setting/" class="btn btn-outline-primary" prompt="Older"><p>dbcp pool 설정에 관해서</p></a> <a href="/posts/Node-js-%EA%B5%90%EA%B3%BC%EC%84%9C/" class="btn btn-outline-primary" prompt="Newer"><p>Node js 교과서 요약 (~ing)</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "OsoriAndOmori/OsoriAndOmori.github.io", "data-repo-id": "R_kgDOHsur3A", "data-category": "Announcements", "data-category-id": "DIC_kwDOHsur3M4CQXkw", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "bottom", "data-lang": "en", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://github.com/OsoriAndOmori">osori</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/database/">database</a> <a class="post-tag" href="/tags/spring-batch/">spring-batch</a> <a class="post-tag" href="/tags/nodejs/">nodejs</a> <a class="post-tag" href="/tags/elasticsearch/">elasticsearch</a> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/mind-control/">mind-control</a> <a class="post-tag" href="/tags/nextjs/">nextjs</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/sharding/">sharding</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-LGKLELXQQR"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-LGKLELXQQR'); }); </script>
